@model Photolife.Models.Photo

@{
    ViewBag.Title = "Details";
}

<script type="text/javascript">

    $(document).ready(function () {

        $('#editLink, #addLink').click(function () {
            $('#descriptionForm').show();
            return false;
        })
        $('#descriptionForm').submit(function () {

            $.ajax({
                type: 'POST', url: this.action, data: $(this).serialize(), success: function (response) {
                    //$('#ContactForm').find('.form_result').html(response);
                    if (response.status == 'ok') {
                        $('#description').html(response.description);
                        $('#descriptionForm').hide();
                    }
                }
            })
            return false;
        });

        $.fn.rating.options = { //$.extend($.fn.rating, { options: {
            cancel: 'Wycofaj swój głos',   // advisory title for the 'cancel' link
            cancelValue: '0',           // value to submit when user click the 'cancel' link
            split: 0,                  // split the star into how many parts?

            // Width of star image in case the plugin can't work it out. This can happen if
            // the jQuery.dimensions plugin is not available OR the image is hidden at installation
            starWidth: 16,

            //NB.: These don't need to be pre-defined (can be undefined/null) so let's save some code!
            //half:     false,         // just a shortcut to control.split = 2
            //required: false,         // disables the 'cancel' button so user can only select one of the specified values
            //readOnly: false,         // disable rating plugin interaction/ values cannot be changed
            //focus:    function(){},  // executed when stars are focused
            //blur:     function(){},  // executed when stars are focused
            callback: function () {
                $.ajax({
                    type: 'POST', url: $('#voteForm').action, data: $('#voteForm').serialize(), success: function (response) {
                        alert(response);
                        //$('#ContactForm').find('.form_result').html(response);
                        //if (response.status == 'ok') {
                        //   $('#description').html(response.description);
                        //    $('#descriptionForm').hide();
                        //}
                    }
                })
                return false;
            }  // executed when a star is clicked
        }; //} });

    })

  

</script>
TODO: walidacja
<h2>Dodał: @Model.MembershipUser.Email</h2>
<span style="font-size: 20px">
    <b style="font-size: 25px">Opis: </b> <span id="description">@Model.description</span>
    @if(Model.description != null && Model.description.Length != 0) {
        <small><br /><a href="#" id="editLink">Edytuj opis</a></small>
    }
    else {
        <small><br /><a href="#" id="addLink">Dodaj opis</a></small>
    }
    @using (Html.BeginForm("EditDescription", "Photo",  new { id = Model.PhotoID }, FormMethod.Post, new { style = "display: none", id="descriptionForm" }))
    {
        <textarea name="description">@Model.description</textarea>
        <input type="submit" value="Zapisz opis" />
    }
</span>
<br /><br />
<img src="@Url.Content(Model.FilePath200)" class="addthis_shareable" alt="Zdjęcie" />
@using (Html.BeginForm("Rate", "Photo",  new { id = Model.PhotoID }, FormMethod.Post, new { id="rateForm" }))
{
    <div>
        <input name="star1" type="radio" class="star" value="1"/>
        <input name="star1" type="radio" class="star" value="2"/>
        <input name="star1" type="radio" class="star" value="3"/>
        <input name="star1" type="radio" class="star" value="4"/>
        <input name="star1" type="radio" class="star" value="5"/>
    </div>
}
